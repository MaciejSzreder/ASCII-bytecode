<!DOCTYPE html>
<html>
	<head>
		<title>ASCII bytecode - tests</title>
		<script src="machine.js"></script>
		<script type="module">
			import { expect } from 'https://cdn.jsdelivr.net/npm/chai@5.1.1/+esm';
			
			function testExecutionOutput(code, steps, input, expectedOutput)
			{
				let out = Machine.execute(code, steps, input);

				expect(out).to.deep.equal(expectedOutput)
			}

			testExecutionOutput('o', 1, [], [0]);

			testExecutionOutput('io', 2, [10], [10]);

			testExecutionOutput('io', 15, [0, 1, 2, 3, 4], [0, 1, 2, 3, 4]);

			testExecutionOutput('iAioao', 14, [0, 1, 2, 3], [1, 0, 3, 2]);

			// TIS-100: Signal Amplifier
			testExecutionOutput('iA+o', 25, [0, 1, 2, 3, 4], [0, 2, 4, 6, 8]);
		</script>
	</head>
</html>